{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Karmo Development Center - Teacher Dashboard</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@400;500;600&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --primary: #4f46e5;
        --primary-dark: #4338ca;
        --primary-light: #e0e7ff;
        --secondary: #7c3aed;
        --success: #10b981;
        --success-light: #d1fae5;
        --warning: #f59e0b;
        --warning-light: #fef3c7;
        --danger: #ef4444;
        --danger-light: #fee2e2;
        --info: #0ea5e9;
        --info-light: #e0f2fe;
        --light: #f8fafc;
        --dark: #1e293b;
        --gray: #64748b;
        --gray-light: #e2e8f0;
        --border-radius: 16px;
        --border-radius-sm: 12px;
        --shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
        --shadow-lg: 0 20px 60px rgba(0, 0, 0, 0.12);
        --shadow-hover: 0 25px 80px rgba(79, 70, 229, 0.15);
        --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        --glass: rgba(255, 255, 255, 0.1);
        --glass-border: rgba(255, 255, 255, 0.2);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Inter", sans-serif;
        background: linear-gradient(135deg, #f0f4ff 0%, #f8fafc 100%);
        color: var(--dark);
        min-height: 100vh;
        line-height: 1.6;
      }

      /* Animated Background */
      .bg-animation {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: -2;
        overflow: hidden;
      }

      .bg-circle {
        position: absolute;
        border-radius: 50%;
        background: radial-gradient(
          circle,
          var(--primary-light) 0%,
          transparent 70%
        );
        opacity: 0.2;
        filter: blur(60px);
        animation: float 25s infinite ease-in-out;
      }

      .circle-1 {
        width: 500px;
        height: 500px;
        top: -150px;
        right: -150px;
        animation-delay: 0s;
      }

      .circle-2 {
        width: 400px;
        height: 400px;
        bottom: -100px;
        left: -100px;
        animation-delay: 5s;
      }

      .circle-3 {
        width: 300px;
        height: 300px;
        top: 50%;
        left: 10%;
        animation-delay: 10s;
      }

      @keyframes float {
        0%,
        100% {
          transform: translate(0, 0) scale(1);
        }
        25% {
          transform: translate(30px, 30px) scale(1.05);
        }
        50% {
          transform: translate(0, 60px) scale(1);
        }
        75% {
          transform: translate(-30px, 30px) scale(0.95);
        }
      }

      /* Main Container */
      .teacher-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px;
        animation: fadeIn 0.8s ease-out;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Header */
      .dashboard-header {
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        color: white;
        padding: 40px;
        border-radius: var(--border-radius);
        margin-bottom: 40px;
        position: relative;
        overflow: hidden;
        box-shadow: var(--shadow-lg);
      }

      .header-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          45deg,
          transparent,
          rgba(255, 255, 255, 0.1)
        );
        z-index: 1;
      }

      .header-content {
        position: relative;
        z-index: 2;
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        flex-wrap: wrap;
        gap: 30px;
      }

      .teacher-info {
        flex: 1;
        min-width: 300px;
      }

      .teacher-welcome {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 20px;
      }

      .teacher-welcome i {
        font-size: 32px;
        background: rgba(255, 255, 255, 0.2);
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        border: 2px solid rgba(255, 255, 255, 0.3);
      }

      .teacher-welcome h1 {
        font-family: "Poppins", sans-serif;
        font-size: 2.5rem;
        font-weight: 700;
        margin: 0;
        line-height: 1.2;
      }

      .teacher-subtitle {
        font-size: 1.2rem;
        opacity: 0.9;
        margin-bottom: 25px;
        max-width: 600px;
      }

      .teacher-meta {
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
      }

      .meta-badge {
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(10px);
        padding: 10px 20px;
        border-radius: 50px;
        display: flex;
        align-items: center;
        gap: 10px;
        font-weight: 500;
        border: 1px solid rgba(255, 255, 255, 0.2);
      }

      .meta-badge i {
        font-size: 18px;
      }

      /* Teacher Profile Summary */
      .profile-summary {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-top: 20px;
        padding: 15px;
        background: rgba(255, 255, 255, 0.1);
        border-radius: var(--border-radius-sm);
        max-width: 400px;
      }

      .profile-avatar {
        width: 50px;
        height: 50px;
        background: linear-gradient(135deg, #fff, #e0e7ff);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        font-weight: 700;
        color: var(--primary);
        border: 2px solid white;
      }

      .profile-details h4 {
        font-family: "Poppins", sans-serif;
        font-size: 1.2rem;
        margin-bottom: 5px;
      }

      .profile-details p {
        font-size: 0.9rem;
        opacity: 0.9;
      }

      /* Stats Cards */
      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 25px;
        margin-bottom: 40px;
      }

      .stat-card {
        background: white;
        border-radius: var(--border-radius);
        padding: 30px;
        box-shadow: var(--shadow);
        transition: var(--transition);
        border: 2px solid transparent;
        position: relative;
        overflow: hidden;
      }

      .stat-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-hover);
        border-color: var(--primary-light);
      }

      .stat-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 4px;
        background: linear-gradient(to right, var(--primary), var(--secondary));
      }

      .stat-icon {
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        color: white;
        margin-bottom: 20px;
      }

      .stat-card:nth-child(1) .stat-icon {
        background: linear-gradient(135deg, var(--primary), #6366f1);
      }
      .stat-card:nth-child(2) .stat-icon {
        background: linear-gradient(135deg, var(--success), #059669);
      }
      .stat-card:nth-child(3) .stat-icon {
        background: linear-gradient(135deg, var(--warning), #d97706);
      }
      .stat-card:nth-child(4) .stat-icon {
        background: linear-gradient(135deg, var(--info), #0284c7);
      }

      .stat-content h3 {
        font-size: 0.9rem;
        text-transform: uppercase;
        color: var(--gray);
        letter-spacing: 1px;
        margin-bottom: 8px;
        font-weight: 600;
      }

      .stat-value {
        font-family: "Poppins", sans-serif;
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--dark);
        margin-bottom: 5px;
      }

      .stat-trend {
        display: flex;
        align-items: center;
        gap: 5px;
        font-size: 0.9rem;
        font-weight: 500;
      }

      .trend-up {
        color: var(--success);
      }
      .trend-down {
        color: var(--danger);
      }

      /* Quick Actions */
      .quick-actions {
        margin-bottom: 40px;
      }

      .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
      }

      .section-header h2 {
        font-family: "Poppins", sans-serif;
        font-size: 1.8rem;
        font-weight: 600;
        color: var(--dark);
        display: flex;
        align-items: center;
        gap: 10px;
      }

      .section-header h2 i {
        color: var(--primary);
      }

      .actions-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
      }

      .action-card {
        background: white;
        border-radius: var(--border-radius-sm);
        padding: 30px 25px;
        text-align: center;
        text-decoration: none;
        color: var(--dark);
        transition: var(--transition);
        box-shadow: var(--shadow);
        border: 2px solid transparent;
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 15px;
      }

      .action-card:hover {
        transform: translateY(-8px);
        box-shadow: var(--shadow-hover);
        border-color: var(--primary);
      }

      .action-icon {
        width: 70px;
        height: 70px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 28px;
        color: white;
        transition: var(--transition);
      }

      .action-card:hover .action-icon {
        transform: scale(1.1) rotate(5deg);
      }

      .action-card:nth-child(1) .action-icon {
        background: linear-gradient(135deg, #8b5cf6, var(--secondary));
      }
      .action-card:nth-child(2) .action-icon {
        background: linear-gradient(135deg, var(--success), #059669);
      }
      .action-card:nth-child(3) .action-icon {
        background: linear-gradient(135deg, var(--info), #0284c7);
      }
      .action-card:nth-child(4) .action-icon {
        background: linear-gradient(135deg, var(--warning), #d97706);
      }
      .action-card:nth-child(5) .action-icon {
        background: linear-gradient(135deg, #f97316, #ea580c);
      }
      .action-card:nth-child(6) .action-icon {
        background: linear-gradient(135deg, var(--danger), #dc2626);
      }

      .action-card h3 {
        font-size: 1.1rem;
        font-weight: 600;
        margin: 0;
      }

      .action-card p {
        font-size: 0.9rem;
        color: var(--gray);
        margin: 0;
        line-height: 1.5;
      }

      /* Recent Activity */
      .activity-section {
        margin-bottom: 40px;
      }

      .activity-list {
        background: white;
        border-radius: var(--border-radius);
        overflow: hidden;
        box-shadow: var(--shadow);
      }

      .activity-item {
        padding: 25px 30px;
        border-bottom: 1px solid var(--gray-light);
        display: flex;
        align-items: center;
        gap: 20px;
        transition: var(--transition);
      }

      .activity-item:last-child {
        border-bottom: none;
      }

      .activity-item:hover {
        background: var(--light);
      }

      .activity-icon {
        width: 50px;
        height: 50px;
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 20px;
        color: white;
        flex-shrink: 0;
      }

      .activity-success .activity-icon {
        background: var(--success);
      }
      .activity-warning .activity-icon {
        background: var(--warning);
      }
      .activity-info .activity-icon {
        background: var(--info);
      }
      .activity-primary .activity-icon {
        background: var(--primary);
      }

      .activity-content {
        flex: 1;
      }

      .activity-content h4 {
        font-weight: 600;
        margin-bottom: 5px;
      }

      .activity-content p {
        color: var(--gray);
        font-size: 0.95rem;
        margin-bottom: 8px;
      }

      .activity-time {
        font-size: 0.85rem;
        color: var(--gray);
        display: flex;
        align-items: center;
        gap: 5px;
      }

      /* Upcoming Tests */
      .tests-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 25px;
        margin-bottom: 40px;
      }

      .test-card {
        background: white;
        border-radius: var(--border-radius);
        padding: 30px;
        box-shadow: var(--shadow);
        transition: var(--transition);
        border: 2px solid transparent;
      }

      .test-card:hover {
        transform: translateY(-5px);
        box-shadow: var(--shadow-hover);
      }

      .test-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 20px;
      }

      .test-subject {
        font-family: "Poppins", sans-serif;
        font-size: 1.3rem;
        font-weight: 600;
        color: var(--dark);
      }

      .test-status {
        padding: 6px 15px;
        border-radius: 50px;
        font-size: 0.85rem;
        font-weight: 600;
      }

      .status-draft {
        background: var(--warning-light);
        color: #92400e;
      }
      .status-published {
        background: var(--success-light);
        color: #065f46;
      }
      .status-ended {
        background: var(--gray-light);
        color: var(--gray);
      }

      .test-meta {
        display: flex;
        gap: 20px;
        margin-bottom: 25px;
        flex-wrap: wrap;
      }

      .test-meta-item {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 0.95rem;
        color: var(--gray);
      }

      .test-meta-item i {
        width: 20px;
        text-align: center;
      }

      .test-progress {
        margin-bottom: 25px;
      }

      .progress-label {
        display: flex;
        justify-content: space-between;
        margin-bottom: 8px;
        font-size: 0.9rem;
        color: var(--gray);
      }

      .progress-bar {
        height: 8px;
        background: var(--gray-light);
        border-radius: 4px;
        overflow: hidden;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(to right, var(--primary), var(--secondary));
        border-radius: 4px;
        transition: width 1s ease;
      }

      .test-actions {
        display: flex;
        gap: 10px;
      }

      .btn {
        padding: 10px 20px;
        border-radius: 8px;
        font-weight: 600;
        font-size: 0.95rem;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 8px;
        transition: var(--transition);
        border: 2px solid transparent;
        cursor: pointer;
      }

      .btn-primary {
        background: linear-gradient(135deg, var(--primary), var(--secondary));
        color: white;
      }

      .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 20px rgba(79, 70, 229, 0.3);
      }

      .btn-outline {
        background: white;
        border-color: var(--gray-light);
        color: var(--dark);
      }

      .btn-outline:hover {
        border-color: var(--primary);
        background: var(--primary-light);
      }

      /* Footer */
      .dashboard-footer {
        text-align: center;
        padding: 30px;
        color: var(--gray);
        font-size: 0.9rem;
        border-top: 1px solid var(--gray-light);
        margin-top: 40px;
      }

      .footer-links {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 15px;
      }

      .footer-links a {
        color: var(--gray);
        text-decoration: none;
        transition: var(--transition);
      }

      .footer-links a:hover {
        color: var(--primary);
      }

      /* Responsive Design */
      @media (max-width: 1200px) {
        .teacher-container {
          padding: 15px;
        }
      }

      @media (max-width: 992px) {
        .dashboard-header {
          padding: 30px;
        }

        .teacher-welcome h1 {
          font-size: 2rem;
        }

        .stats-grid {
          grid-template-columns: repeat(2, 1fr);
        }

        .actions-grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      @media (max-width: 768px) {
        .header-content {
          flex-direction: column;
        }

        .teacher-welcome {
          flex-direction: column;
          text-align: center;
          gap: 20px;
        }

        .teacher-meta {
          justify-content: center;
        }

        .stats-grid {
          grid-template-columns: 1fr;
        }

        .actions-grid {
          grid-template-columns: 1fr;
        }

        .tests-grid {
          grid-template-columns: 1fr;
        }

        .activity-item {
          flex-direction: column;
          text-align: center;
          gap: 15px;
        }

        .test-actions {
          flex-direction: column;
        }

        .btn {
          width: 100%;
          justify-content: center;
        }
      }

      @media (max-width: 576px) {
        .dashboard-header {
          padding: 25px 20px;
        }

        .teacher-welcome h1 {
          font-size: 1.6rem;
        }

        .meta-badge {
          padding: 8px 15px;
          font-size: 0.9rem;
        }

        .stat-card {
          padding: 25px 20px;
        }

        .stat-value {
          font-size: 2rem;
        }

        .action-card {
          padding: 25px 20px;
        }

        .test-card {
          padding: 25px 20px;
        }
      }

      /* Loading Animation */
      .loading {
        display: inline-block;
        width: 20px;
        height: 20px;
        border: 2px solid #f3f3f3;
        border-top: 2px solid var(--primary);
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }

      /* Notification Badge */
      .notification-badge {
        position: relative;
      }

      .badge {
        position: absolute;
        top: -8px;
        right: -8px;
        background: var(--danger);
        color: white;
        border-radius: 50%;
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: 600;
      }

      /* Back to Profile Link */
      .back-link {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        color: white;
        text-decoration: none;
        font-weight: 500;
        margin-top: 20px;
        opacity: 0.9;
        transition: var(--transition);
      }

      .back-link:hover {
        opacity: 1;
        transform: translateX(-5px);
      }

      /* Empty State */
      .empty-state {
        text-align: center;
        padding: 60px 20px;
        background: white;
        border-radius: var(--border-radius);
        box-shadow: var(--shadow);
      }

      .empty-state i {
        font-size: 64px;
        color: var(--gray-light);
        margin-bottom: 20px;
      }

      .empty-state h3 {
        font-family: "Poppins", sans-serif;
        font-size: 1.5rem;
        color: var(--dark);
        margin-bottom: 10px;
      }

      .empty-state p {
        color: var(--gray);
        max-width: 400px;
        margin: 0 auto 20px;
      }
    </style>
  </head>
  <body>
    <!-- Animated Background -->
    <div class="bg-animation">
      <div class="bg-circle circle-1"></div>
      <div class="bg-circle circle-2"></div>
      <div class="bg-circle circle-3"></div>
    </div>

    <div class="teacher-container">
      <!-- Dashboard Header -->
      <header class="dashboard-header">
        <div class="header-overlay"></div>
        <div class="header-content">
          <div class="teacher-info">
            <div class="teacher-welcome">
              <i class="fas fa-chalkboard-teacher"></i>
              <div>
                <h1>
                  {% if teacher %} Welcome back, {{ teacher.user.first_name }}!
                  {% else %} Welcome, Teacher! {% endif %}
                </h1>
                <p class="teacher-subtitle">
                  Manage your tests, track student progress, and create engaging
                  assessments.
                </p>
              </div>
            </div>

            <div class="teacher-meta">
              {% if teacher %}
              <div class="meta-badge">
                <i class="fas fa-book"></i>
                <span>
                  {% if teacher.subject %} Subject: {{ teacher.subject }}
                  {% else %} Subject: Not specified {% endif %}
                </span>
              </div>
              <div class="meta-badge">
                <i class="fas fa-calendar-alt"></i>
                <span>
                  {% if teacher.school_year %} Academic Year: {{ teacher.school_year }}
                  {% else %} Academic Year: {{ current_year }} {% endif %}
                </span>
              </div>
              <div class="meta-badge">
                <i class="fas fa-school"></i>
                <span>
                  {% if teacher.school %} School: {{ teacher.school }} {% else
                  %} School: Not specified {% endif %}
                </span>
              </div>
              {% endif %}
            </div>

            <!-- Teacher Profile Summary -->
            {% if teacher %}
            <div class="profile-summary">
              <div class="profile-avatar">
                {{ teacher.user.first_name|first|upper }}
              </div>
              <div class="profile-details">
                <h4>
                  {{ teacher.user.first_name }} {{ teacher.user.last_name }}
                </h4>
                <p>{{ teacher.user.email }}</p>
              </div>
            </div>
            {% endif %}

            <a href="{% url 'profile' %}" class="back-link">
              <i class="fas fa-arrow-left"></i>
              Back to Profile
            </a>
          </div>

          <div class="notification-badge">
            <i
              class="fas fa-bell"
              style="font-size: 24px; color: white; cursor: pointer"
            ></i>
            <span class="badge">3</span>
          </div>
        </div>
      </header>

      <!-- Statistics Cards -->
      <div class="stats-grid">
        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-clipboard-list"></i>
          </div>
          <div class="stat-content">
            <h3>Total Tests</h3>
            <div class="stat-value">
              {% if teacher.test_set.count %} {{ teacher.test_set.count }}
              {% else %} 0 {% endif %}
            </div>
            <div class="stat-trend trend-up">
              <i class="fas fa-arrow-up"></i>
              <span>
                {% if teacher.test_set.count > 0 %} {{ teacher.test_set.count }}
                active {% else %} No tests yet {% endif %}
              </span>
            </div>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-check-circle"></i>
          </div>
          <div class="stat-content">
            <h3>Completed Tests</h3>
            <div class="stat-value">
              {% if teacher.completed_tests_count %} {{
              teacher.completed_tests_count }} {% else %} 0 {% endif %}
            </div>
            <div class="stat-trend trend-up">
              <i class="fas fa-arrow-up"></i>
              <span>
                {% if teacher.completed_tests_count %} {{
                teacher.completed_tests_count }} graded {% else %} No completed
                tests {% endif %}
              </span>
            </div>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-chart-line"></i>
          </div>
          <div class="stat-content">
            <h3>Average Score</h3>
            <div class="stat-value">
              {% if teacher.average_score %} {{ teacher.average_score }}%
              {% else %} 0% {% endif %}
            </div>
            <div class="stat-trend trend-up">
              <i class="fas fa-arrow-up"></i>
              <span>
                {% if teacher.average_score %} {{ teacher.score_trend }}% trend
                {% else %} No data {% endif %}
              </span>
            </div>
          </div>
        </div>

        <div class="stat-card">
          <div class="stat-icon">
            <i class="fas fa-clock"></i>
          </div>
          <div class="stat-content">
            <h3>Pending Reviews</h3>
            <div class="stat-value">
              {% if teacher.pending_reviews %} {{ teacher.pending_reviews }}
              {% else %} 0 {% endif %}
            </div>
            <div class="stat-trend trend-down">
              <i class="fas fa-arrow-down"></i>
              <span>
                {% if teacher.pending_reviews %} {{ teacher.recently_reviewed }}
                resolved {% else %} All caught up {% endif %}
              </span>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <section class="quick-actions">
        <div class="section-header">
          <h2><i class="fas fa-bolt"></i> Quick Actions</h2>
        </div>

        <div class="actions-grid">
          <!-- CREATE NEW TEST -->
          <a href="{% url 'test_create' %}" class="action-card">
            <div class="action-icon">
              <i class="fas fa-plus"></i>
            </div>
            <h3>Create New Test</h3>
            <p>Design a new assessment with multiple question types</p>
          </a>


          <a href="{% url 'book-list' %}" class="action-card">
            <div class="action-icon">
              <i class="fas fa-plus"></i>
            </div>
            <h3>Browse Library</h3>
            <p>Check out different books in the library</p>
          </a>

          <!-- VIEW ALL TESTS -->
          <a href="{% url 'test_list' %}" class="action-card">
            <div class="action-icon">
              <i class="fas fa-clipboard-list"></i>
            </div>
            <h3>Manage Tests</h3>
            <p>View, edit, publish, and delete your tests</p>
          </a>

          <!-- For individual test actions, we'll show in test cards below -->

          <!-- VIEW RESULTS (Placeholder) -->
          <a href="#" class="action-card" onclick="showComingSoon('View Results')">
            <div class="action-icon">
              <i class="fas fa-chart-bar"></i>
            </div>
            <h3>View Results</h3>
            <p>Analyze student performance and statistics</p>
          </a>

          <!-- QUESTION BANK (Placeholder) -->
          <a href="#" class="action-card" onclick="showComingSoon('Question Bank')">
            <div class="action-icon">
              <i class="fas fa-question-circle"></i>
            </div>
            <h3>Question Bank</h3>
            <p>Create question bank for future tests</p>
          </a>

          <!-- STUDENT PROGRESS (Placeholder) -->
          <a href="#" class="action-card" onclick="showComingSoon('Student Progress')">
            <div class="action-icon">
              <i class="fas fa-user-graduate"></i>
            </div>
            <h3>Student Progress</h3>
            <p>Track individual student performance</p>
          </a>

          <!-- SETTINGS (Placeholder) -->
          <a href="#" class="action-card" onclick="showComingSoon('Settings')">
            <div class="action-icon">
              <i class="fas fa-cog"></i>
            </div>
            <h3>Settings</h3>
            <p>Configure test settings and preferences</p>
          </a>
        </div>
      </section>

      <!-- Two Column Layout -->
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 40px; margin-bottom: 40px;">
        <!-- Recent Activity -->
        <section class="activity-section">
          <div class="section-header">
            <h2><i class="fas fa-history"></i> Recent Activity</h2>
          </div>

          {% if teacher and teacher.recent_activities %}
          <div class="activity-list">
            {% for activity in teacher.recent_activities %}
            <div class="activity-item activity-{{ activity.type }}">
              <div class="activity-icon">
                <i class="{{ activity.icon }}"></i>
              </div>
              <div class="activity-content">
                <h4>{{ activity.title }}</h4>
                <p>{{ activity.description }}</p>
                <div class="activity-time">
                  <i class="far fa-clock"></i>
                  <span>{{ activity.time }}</span>
                </div>
              </div>
            </div>
            {% endfor %}
          </div>
          {% else %}
          <div class="empty-state">
            <i class="fas fa-history"></i>
            <h3>No Recent Activity</h3>
            <p>
              Your recent activities will appear here once you start using the
              dashboard.
            </p>
            <a href="{% url 'test_create' %}" class="btn btn-primary">
              <i class="fas fa-plus"></i>
              Create Your First Test
            </a>
          </div>
          {% endif %}
        </section>

        <!-- Recent Tests -->
        <section>
          <div class="section-header">
            <h2><i class="fas fa-clipboard-check"></i> Recent Tests</h2>
            <a href="{% url 'test_list' %}" class="btn btn-outline" style="font-size: 0.9rem;">
              <i class="fas fa-eye"></i> View All
            </a>
          </div>

          {% if tests and tests.count > 0 %}
          <div class="tests-grid" style="grid-template-columns: 1fr">
            {% for test in tests|slice:":3" %}
            <div class="test-card">
              <div class="test-header">
                <div class="test-subject">{{ test.subject }}</div>
                <div class="test-status status-{% if test.is_published %}published{% else %}draft{% endif %}">
                  {% if test.is_published %}Published{% else %}Draft{% endif %}
                </div>
              </div>

              <div class="test-meta">
                <div class="test-meta-item">
                  <i class="far fa-calendar"></i>
                  <span>Created: {{ test.date_added|date:"M d, Y" }}</span>
                </div>
                <div class="test-meta-item">
                  <i class="far fa-clock"></i>
                  <span>{{ test.time_limit }} minutes</span>
                </div>
                <div class="test-meta-item">
                  <i class="fas fa-question-circle"></i>
                  <span>{{ test.questions.count }} questions</span>
                </div>
              </div>

              <div class="test-progress">
                <div class="progress-label">
                  <span>Status</span>
                  <span>
                    {% if test.is_published %}Ready for students{% else %}In draft{% endif %}
                  </span>
                </div>
                <div class="progress-bar">
                  <div class="progress-fill" style="width: {% if test.is_published %}100{% else %}50{% endif %}%"></div>
                </div>
              </div>

              <div class="test-actions">
                <!-- Manage Questions -->
                <a href="{% url 'question_list' test.id %}" class="btn btn-primary">
                  <i class="fas fa-list-check"></i>
                  Questions
                </a>
                
                <!-- Edit Test -->
                <a href="{% url 'test_update' test.id %}" class="btn btn-outline">
                  <i class="fas fa-edit"></i>
                  Edit
                </a>
                
                <!-- Publish/Unpublish -->
                <form method="post" action="{% url 'test_publish' test.id %}" style="display: inline;">
                  {% csrf_token %}
                  <button type="submit" class="btn {% if test.is_published %}btn-outline{% else %}btn-primary{% endif %}" 
                          style="border: none; font-family: inherit; font-size: inherit;">
                    <i class="fas fa-{% if test.is_published %}times{% else %}check{% endif %}-circle"></i>
                    {% if test.is_published %}Unpublish{% else %}Publish{% endif %}
                  </button>
                </form>
              </div>
            </div>
            {% endfor %}
          </div>
          
          {% if tests.count > 3 %}
          <div style="text-align: center; margin-top: 20px;">
            <a href="{% url 'test_list' %}" class="btn btn-outline">
              <i class="fas fa-arrow-right"></i>
              View All {{ tests.count }} Tests
            </a>
          </div>
          {% endif %}
          
          {% else %}
          <div class="empty-state">
            <i class="fas fa-clipboard-list"></i>
            <h3>No Tests Created</h3>
            <p>Create your first test to start assessing your students.</p>
            <a href="{% url 'test_create' %}" class="btn btn-primary">
              <i class="fas fa-plus"></i>
              Create First Test
            </a>
          </div>
          {% endif %}
        </section>
      </div>

      <!-- Footer -->
      <footer class="dashboard-footer">
        <p>Karmo Development Center â€¢ Teacher Dashboard v1.0</p>
        <p>Empowering educators to create better learning experiences</p>

        <div class="footer-links">
          <a href="#" onclick="showComingSoon('Help Center')">Help Center</a>
          <a href="#" onclick="showComingSoon('Documentation')">Documentation</a>
          <a href="#" onclick="showComingSoon('Contact Support')">Contact Support</a>
          <a href="{% url 'logout' %}">Logout</a>
        </div>
      </footer>
    </div>

    <!-- Coming Soon Modal -->
    <div id="comingSoonModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0, 0, 0, 0.7); z-index: 1000; align-items: center; justify-content: center;">
      <div style="background: white; padding: 40px; border-radius: 20px; max-width: 500px; width: 90%; text-align: center; animation: modalSlide 0.3s ease;">
        <div style="width: 80px; height: 80px; background: linear-gradient(135deg, var(--primary), var(--secondary)); border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px;">
          <i class="fas fa-tools" style="font-size: 36px; color: white"></i>
        </div>
        <h2 style="font-family: 'Poppins', sans-serif; margin-bottom: 10px; color: var(--dark);" id="modalTitle"></h2>
        <p style="color: var(--gray); margin-bottom: 25px">
          This feature is currently under development and will be available soon!
        </p>
        <button onclick="closeComingSoon()" style="background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; border: none; padding: 12px 30px; border-radius: 8px; font-weight: 600; cursor: pointer; font-size: 1rem;">
          Got it!
        </button>
      </div>
    </div>

    <script>
      // Initialize animations
      document.addEventListener('DOMContentLoaded', function() {
          // Animate stat cards on scroll
          const observerOptions = {
              threshold: 0.2,
              rootMargin: '0px 0px -50px 0px'
          };

          const observer = new IntersectionObserver((entries) => {
              entries.forEach(entry => {
                  if (entry.isIntersecting) {
                      entry.target.style.animation = 'fadeIn 0.6s ease-out';
                      entry.target.style.opacity = '1';
                      entry.target.style.transform = 'translateY(0)';
                  }
              });
          }, observerOptions);

          // Observe all cards for animation
          document.querySelectorAll('.stat-card, .action-card, .test-card').forEach(card => {
              card.style.opacity = '0';
              card.style.transform = 'translateY(20px)';
              observer.observe(card);
          });

          // Update time indicators
          updateTimeIndicators();
      });

      // Coming Soon Modal
      function showComingSoon(featureName) {
          event.preventDefault();
          document.getElementById('modalTitle').textContent = featureName;
          document.getElementById('comingSoonModal').style.display = 'flex';
          document.body.style.overflow = 'hidden';
      }

      function closeComingSoon() {
          document.getElementById('comingSoonModal').style.display = 'none';
          document.body.style.overflow = 'auto';
      }

      // Close modal on outside click
      document.getElementById('comingSoonModal').addEventListener('click', function(e) {
          if (e.target === this) {
              closeComingSoon();
          }
      });

      // Keyboard shortcut for modal close
      document.addEventListener('keydown', function(e) {
          if (e.key === 'Escape') {
              closeComingSoon();
          }
      });

      // Update time indicators
      function updateTimeIndicators() {
          const times = document.querySelectorAll('.activity-time span');
          const now = new Date();

          times.forEach(timeElement => {
              const text = timeElement.textContent;
              if (text.includes('hours ago')) {
                  const hours = parseInt(text);
                  if (hours > 12) {
                      timeElement.style.color = 'var(--danger)';
                      timeElement.innerHTML = '<i class="fas fa-exclamation-circle"></i> ' + text;
                  }
              }
          });
      }

      // Simulate loading for action buttons
      document.querySelectorAll('.action-card').forEach(card => {
          card.addEventListener('click', function(e) {
              const originalHTML = this.innerHTML;
              this.innerHTML = `
                  <div class="loading"></div>
                  <p style="margin-top: 10px;">Loading...</p>
              `;
              this.style.pointerEvents = 'none';

              setTimeout(() => {
                  this.innerHTML = originalHTML;
                  this.style.pointerEvents = 'auto';
              }, 1500);
          });
      });

      // Notification bell animation
      const bell = document.querySelector('.fa-bell');
      if (bell) {
          bell.addEventListener('click', function() {
              this.style.transform = 'rotate(20deg)';
              setTimeout(() => {
                  this.style.transform = 'rotate(-20deg)';
                  setTimeout(() => {
                      this.style.transform = 'rotate(0deg)';
                  }, 200);
              }, 200);
          });
      }

      // Confirm before publishing/unpublishing
      document.querySelectorAll('form[action*="publish"] button').forEach(button => {
          button.addEventListener('click', function(e) {
              const action = this.innerHTML.includes('Publish') ? 'publish' : 'unpublish';
              if (!confirm(`Are you sure you want to ${action} this test?`)) {
                  e.preventDefault();
              }
          });
      });

      @keyframes modalSlide {
          from {
              opacity: 0;
              transform: translateY(-30px) scale(0.9);
          }
          to {
              opacity: 1;
              transform: translateY(0) scale(1);
          }
      }
    </script>
  </body>
</html>